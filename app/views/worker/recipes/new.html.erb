<h3>ルセット登録</h3>

<div class="container mt-4 align-imtes-center">
  <div class='bg-light mx-auto mb-5'>
    
  <%= form_with model: @recipe, url: worker_recipes_new_path do |f| %>
  
      <div class="form-group row">
        <label class="col-sm-4 col-form-label">商品画像</label>
        <div class="col-sm-8">
          <%= f.file_field :image, class: "form-control-file", accept: 'image/*' %>
        </div>
      </div>

      <div class="form-group row">
        <label class="col-sm-4 col-form-label">商品名</label>
        <div class="col-sm-8">
        <%= f.text_field :name, class: "form-control-file", placeholder: "商品名" %>
      </div>
      </div>

    <!------------ 材料登録欄 -------------->
    
      <div class="row">
        <label class="col-sm-4 col-form-label">材料</label>
           <div class="ingredients">
      <div class="mx-auto">
        <%= f.fields_for :ingredients do |t| %>
          <%= render "recipes/ingredient_fields", f: t %>
        <% end %>
      </div>

      <div id="detail-association-insertion-point"></div>

      <div class="col-10 mx-auto mt-2">
        <%= link_to_add_association "+フォームを追加", f, :ingredients,
        class: "btn btn-secondary btn-block",
        data: {
        association_insertion_node: '#detail-association-insertion-point',
        association_insertion_method: 'after'
        }%>
      </div>
    </div>
      
      <div class="form-group row">
        <label class="col-sm-4 col-form-label">商品説明</label>
        <div class="col-sm-8">
          <%= f.text_area :description, class: "form-control-file", placeholder: "ここに説明文を記述します" %>
        </div>
      </div>

    <!------------ 作成手順登録欄 -------------->
    <div style='max-width: 680px' class="mt-3 px-5 pt-4 mx-auto border-0">
      <div class="row">
        <label class="col-sm-4 col-form-label">作り方</label>
      </div>

      <div class="row">
        <table class="table table-borderless" id="procedure-table">
          <%= f.fields_for :procedure do |procedure| %>
          <tr>
            <td style='width: 70%' class="px-0"><%= procedure.text_area :procedure, placeholder:"手順を記入", size:'50 x 3', class:'p-2' %> </td>
            <td class="align-middle"><input type="button" value="削除" onclick="deleteRow(this)"></td>
          </tr>
          <% end %>
        </table>
        <input type="button" value="行を追加する" onclick="addRow('procedure-table')" class="btn btn-sm btn-color py-0 mb-3">
      </div>
    </div>
    
    <div class="form-group row">
      <label class="col-sm-4 col-form-label">ジャンル</label>
      <div class="col-sm-8">
        <%= f.select :genre_id, options_from_collection_for_select(Genre.all, :id, :name),  { include_blank: "--選択してください--" }, class: "form-control" %>
      </div>
    </div>

    <div class="row mt-4 pb-5">
      <div class="form-inline mx-auto">
        <%= f.submit 'レシピを公開', :name => 'post', style: 'font-size: 20px', class:'mr-5 btn btn-sm btn-warning text-white' %>
        <%= f.submit '下書きに保存', :name => 'update', style: 'font-size: 20px', class:'mr-5 btn btn-sm btn-outline-secondary' %>
      </div>
    </div>

    <%#= f.hidden_field :worker_id, :value => current_worker.id %>
    <% end %>

  </div>
</div>
